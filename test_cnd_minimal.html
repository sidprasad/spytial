<!DOCTYPE html>
<html>
<head>
    <title>Minimal CnD Test</title>
    <script src="https://cdn.jsdelivr.net/npm/cnd-core@1.4.2/dist/browser/cnd-core-complete.global.js"></script>
</head>
<body>
    <h1>Minimal CnD Test</h1>
    <div style="width: 800px; height: 600px; border: 1px solid black;">
        <structured-input-graph 
            id="test-graph"
            style="width: 100%; height: 100%;">
        </structured-input-graph>
    </div>

    <script>
        window.addEventListener('load', function() {
            console.log('Page loaded');
            console.log('CndCore available:', typeof CndCore !== 'undefined');
            
            const graphElement = document.getElementById('test-graph');
            console.log('Graph element:', graphElement);
            
            // Simple test data
            const testData = {
                atoms: [
                    { id: '1', type: 'int', label: '42', type_hierarchy: ['int', 'object'] },
                    { id: 'n0', type: 'TreeNode', label: 'root', type_hierarchy: ['TreeNode', 'object'] }
                ],
                relations: [
                    {
                        id: 'value',
                        name: 'value',
                        types: ['object', 'object'],
                        tuples: [{ atoms: ['n0', '1'], types: ['TreeNode', 'int'] }]
                    }
                ],
                types: [
                    { _: 'type', id: 'int', types: ['int', 'object'], atoms: [{ _: 'atom', id: '1', type: 'int' }], meta: { builtin: true } },
                    { _: 'type', id: 'TreeNode', types: ['TreeNode', 'object'], atoms: [{ _: 'atom', id: 'n0', type: 'TreeNode' }], meta: { builtin: false } }
                ]
            };
            
            try {
                const dataInstance = new CndCore.JSONDataInstance(testData);
                console.log('Data instance created:', dataInstance);
                
                graphElement.setDataInstance(dataInstance);
                console.log('Data instance set on graph');
                
                setTimeout(() => {
                    console.log('Graph state:', graphElement.isConnected);
                }, 500);
            } catch (error) {
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
